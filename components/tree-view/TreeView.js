(()=>{var n={d:(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},e={};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);if("object"!=i(r=r.call(e,t||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==i(e)?e:e+""))(n.key),n)}}n.r(e),n.d(e,{default:()=>r});let t=(()=>{function o(e){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");"object"===i(e)&&(this.treeNode=e.querySelector(":scope > ul"),this.treeItems=this.treeNode.querySelectorAll(".menu__link"),this.subMenus=this.treeNode.querySelectorAll("ul:not(.menu--level-1)"),this.initializeTreeViews())}return e=o,r=[{key:"updateActiveTree",value:function(e){for(var t,r=e.parentElement;r;)r.classList.contains("menu-item")&&(t=r.querySelector("a"))&&t.hasAttribute("aria-expanded")&&t.setAttribute("aria-expanded","true"),r=r.parentElement}},{key:"onTriggerClick",value:function(e){var t=e.currentTarget;o.isExpanded(t.parentNode)?o.collapseTreeItem(t.parentNode):o.expandTreeItem(t.parentNode),e.preventDefault(),e.stopPropagation()}},{key:"collapseTreeItem",value:function(e){o.isExpandable(e)&&o.isExpanded(e)&&e.setAttribute("aria-expanded","false")}},{key:"expandTreeItem",value:function(e){o.isExpandable(e)&&!o.isExpanded(e)&&e.setAttribute("aria-expanded","true")}},{key:"setFocusToTreeItem",value:function(e){e.focus()}},{key:"setFocusToNextTreeItem",value:function(e){var t;o.isExpanded(e)&&0<e.nextElementSibling.querySelectorAll(':scope > li > [aria-role="tree-item"]').length?(t=e.nextElementSibling.querySelectorAll(':scope > li > [aria-role="tree-item"]'),o.setFocusToTreeItem(t[0])):!o.isExpanded(e)&&e.parentNode.nextElementSibling?(t=e.parentNode.nextElementSibling.querySelector('[aria-role="tree-item"]'),o.setFocusToTreeItem(t)):o.isExpanded(e)||e.parentNode.nextElementSibling||!e.closest("ul").parentNode.nextElementSibling||null!=(t=e.closest("ul").parentNode.nextElementSibling.querySelector(':scope > [aria-role="tree-item"]'))&&t.focus()}},{key:"setFocusToPreviousTreeItem",value:function(e){var t;e.parentNode.previousElementSibling&&!o.isExpanded(e.parentNode.previousElementSibling.querySelector('[aria-role="tree-item"]'))?(t=e.parentNode.previousElementSibling.querySelector('[aria-role="tree-item"]'),o.setFocusToTreeItem(t)):e.parentNode.previousElementSibling&&o.isExpanded(e.parentNode.previousElementSibling.querySelector('[aria-role="tree-item"]'))?(t=e.parentNode.previousElementSibling.querySelector(':scope > ul > li:last-of-type > [aria-role="tree-item"]'),o.setFocusToTreeItem(t)):!e.parentNode.previousElementSibling&&e.parentNode.parentNode.previousElementSibling&&(t=e.parentNode.parentNode.previousElementSibling,o.setFocusToTreeItem(t))}},{key:"cleanForId",value:function(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace("open","")}},{key:"getGroupNode",value:function(e){var t,e=e.getAttribute("aria-owns");return t=e?document.querySelector("#".concat(e)):t}},{key:"isVisible",value:function(e){e=e.closest("ul").previousElementSibling;return!(!e||!o.isExpanded(e))}},{key:"isExpandable",value:function(e){return e.hasAttribute("aria-expanded")}},{key:"isExpanded",value:function(e){return"true"===e.getAttribute("aria-expanded")}}],(t=[{key:"initializeTreeViews",value:function(){var t=this;this.treeNode.setAttribute("role","tree"),this.adjustLinkAttributes(),this.adjustSubMenuAttributes(),this.attachTriggers(),this.treeItems.forEach(function(e){e.addEventListener("keydown",t.onKeydown.bind(t))})}},{key:"attachTriggers",value:function(){this.treeItems.forEach(function(e){var t=o.getGroupNode(e),r=document.createElement("button");r.classList.add("menu__link-trigger"),r.innerHTML="Open",r.tabIndex=-1,t&&(e.appendChild(r),r.addEventListener("click",o.onTriggerClick))})}},{key:"adjustLinkAttributes",value:function(){this.treeItems.forEach(function(e){var t=e.textContent,t=o.cleanForId(t);e.setAttribute("aria-role","tree-item"),e.tabIndex=-1,e.classList.contains("is-active")&&(e.setAttribute("aria-current","page"),e.setAttribute("tabIndex",0),o.updateActiveTree(e)),e.nextElementSibling&&(e.setAttribute("aria-owns",t),e.setAttribute("aria-expanded","false"))})}},{key:"adjustSubMenuAttributes",value:function(){this.subMenus.forEach(function(e){var t=e.previousElementSibling.textContent,t=o.cleanForId(t);e.setAttribute("aria-role","group"),e.setAttribute("id",t)})}},{key:"onKeydown",value:function(e){var t=e.currentTarget,r=e.key,n=!1;if(!(e.altKey||e.ctrlKey||e.metaKey)){switch(r){case" ":n=!0;break;case"Up":case"ArrowUp":o.setFocusToPreviousTreeItem(t),n=!0;break;case"Down":case"ArrowDown":t.classList.contains("menu__link--level-2")&&t===t.closest("ul").querySelector(':scope > li:last-of-type > [aria-role="tree-item"]')?null!=(i=t.closest(".book-navigation").nextElementSibling)&&null!=(i=i.querySelector(".menu__link--level-1"))&&i.focus():o.setFocusToNextTreeItem(t),n=!0;break;case"Right":case"ArrowRight":o.isExpandable(t)&&(o.isExpanded(t)?o.setFocusToNextTreeItem(t):o.expandTreeItem(t)),n=!0;break;case"Left":case"ArrowLeft":n=(o.isExpanded(t)?o.collapseTreeItem(t):o.setFocusToPreviousTreeItem(t),!0);break;case"Home":o.setFocusToTreeItem(this.treeItems[0]),n=!0;break;case"End":var i=this.getVisibleTreeItems();o.setFocusToTreeItem(i[i.length-1]),n=!0;break;default:n=!0}n&&(e.stopPropagation(),e.preventDefault())}}},{key:"getVisibleTreeItems",value:function(){var t=[];return this.treeItems.forEach(function(e){o.isVisible(e)&&t.push(e)}),t}}])&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r})(),r=t})();